<!DOCTYPE html>
<html lang='en'>
<head>
    <meta charset='utf-8'>
    <title>Vue.js wrapper component example (jquery plugin: select2)</title>
    <script src='vue.set.js'></script>
</head>
<body>

<div id='el'>
</div>
<button id="testBtn">set.add</button>
<button id="testBtn1">点击增加proxy属性</button>
<button id="testBtn2">map.delete("item1")</button>


<script>
    const {effect, onMounted, reactive, createApp, watchEffect} = Vue;
    const App = {
        setup(props, ctx) {

            const set = new Set([1, 2, 3]);
            const proxySet = reactive(set);


            const object = {
                "item1": 1,
                "item2": 333
            }
            const map = new Map(Object.entries(object));
            const objectKey = {test: 1};
            const reactiveKey = reactive(objectKey);
            map.set(reactiveKey, "testReactive");
            const proxy = reactive(map);

            const objectKeyProxy = {testProxy: 1};
            const reactiveKeyProxy = reactive(objectKeyProxy);
            proxy.set(reactiveKeyProxy, "testProxyReactive");

            effect(() => {
                console.log("map.size", proxy.size);
                console.log("map.get(普通number)", proxy.get(0));
                console.log("map.get(proxy对象)", proxy.get(reactiveKey));
                console.log("map.get(原始对象)", proxy.get(objectKey));
                console.log("map.get(proxy对象之后才set的)", proxy.get(reactiveKeyProxy));
                console.log("map.has", proxy.has(4));
            });

            effect(()=> {
              console.log("Set.add", proxySet.add(5));
              console.log("Map.set", proxy.set(0, 44444));
              console.log("size.delete", proxy.delete("item2"));
              console.log("Map.clear", proxy.clear());
            });

            // effect(()=> {
            //   set.forEach((...args)=> {
            //     console.info("set.forEach item", ...args);
            //   });
            // });

            return {};
        },
    };
    const app = createApp(App);
    app.mount("#el");
</script>
</body>
</html>
