<svg id="SvgjsSvg2113" xmlns="http://www.w3.org/2000/svg" version="1.1" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.com/svgjs" width="1508.015625" height="1001.265625"><defs id="SvgjsDefs2114"><marker id="SvgjsMarker2188" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2189" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2214" markerWidth="16" markerHeight="12" refX="0" refY="6" viewBox="0 0 16 12" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2215" d="M1 6L15 1L15 11L1 6 " fill="#ffffff" stroke="#323232" stroke-width="2"></path></marker><marker id="SvgjsMarker2246" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2247" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2256" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2257" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2284" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2285" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2352" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2353" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2356" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2357" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2368" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2369" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2372" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2373" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2394" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2395" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2416" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2417" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2420" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2421" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2428" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2429" d="M0 0L14 5L0 10L0 0 " fill="#ff0000" stroke="#ff0000" stroke-width="1"></path></marker><marker id="SvgjsMarker2432" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2433" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2474" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2475" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2504" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2505" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2508" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2509" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2512" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2513" d="M0 0L14 5L0 10L0 0 " fill="#ff0000" stroke="#ff0000" stroke-width="1"></path></marker><marker id="SvgjsMarker2600" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2601" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2610" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2611" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2614" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2615" d="M0 0L14 5L0 10L0 0 " fill="#323232" stroke="#323232" stroke-width="1"></path></marker><marker id="SvgjsMarker2654" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2655" d="M0 0L14 5L0 10L0 0 " fill="#ff0000" stroke="#ff0000" stroke-width="1"></path></marker><marker id="SvgjsMarker2658" markerWidth="14" markerHeight="10" refX="10" refY="5" viewBox="0 0 14 10" orient="auto" markerUnits="userSpaceOnUse" stroke-dasharray="0,0"><path id="SvgjsPath2659" d="M0 0L14 5L0 10L0 0 " fill="#ff0000" stroke="#ff0000" stroke-width="1"></path></marker></defs><g id="svgbackgroundid"><defs></defs><rect id="SvgjsRect2116" width="1508.015625" height="1001.265625" fill="#ffffff"></rect></g><g id="SvgjsG2118" transform="translate(825.16287325308,808.722222222222)"><path id="SvgjsPath2119" d="M0 0L234.2869090435304 0L234.2869090435304 100.55555555555554L0 100.55555555555554Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2120"><text id="SvgjsText2121" font-family="微软雅黑" text-anchor="end" font-size="16px" width="215px" fill="#ff0000" font-weight="400" align="top" lineHeight="250%" font-style="" opacity="1" y="-14" transform="rotate(0)"><tspan id="SvgjsTspan2122" dy="40" x="225"><tspan id="SvgjsTspan2123" style="text-decoration:;">依赖收集</tspan></tspan></text></g></g><g id="SvgjsG2124" transform="translate(29.976787855098564,25)"><path id="SvgjsPath2125" d="M0 0L1093.0464242898029 0L1093.0464242898029 931L0 931Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath2126" d="M0 0L1093.0464242898029 0L1093.0464242898029 40L0 40Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2127"><text id="SvgjsText2128" font-family="微软雅黑" text-anchor="middle" font-size="16px" width="1074px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="6" transform="rotate(0)"><tspan id="SvgjsTspan2129" dy="20" x="547"><tspan id="SvgjsTspan2130" style="text-decoration:;">Vue3 computed 派发更新</tspan></tspan></text></g></g><g id="SvgjsG2131" transform="translate(29.976787855098564,65)"><path id="SvgjsPath2132" d="M0 0L366.02321214490144 0L366.02321214490144 891L0 891Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath2133" d="M0 0L366.02321214490144 0L366.02321214490144 30L0 30Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2134"><text id="SvgjsText2135" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="347px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan2136" dy="16" x="183.5"><tspan id="SvgjsTspan2137" style="text-decoration:;">proxy.count改变</tspan></tspan></text></g></g><g id="SvgjsG2138" transform="translate(396,65)"><path id="SvgjsPath2139" d="M0 0L347.02321214490144 0L347.02321214490144 891L0 891Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath2140" d="M0 0L347.02321214490144 0L347.02321214490144 30L0 30Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2141"><text id="SvgjsText2142" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="328px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan2143" dy="16" x="174"><tspan id="SvgjsTspan2144" style="text-decoration:;">computed</tspan></tspan></text></g></g><g id="SvgjsG2145" transform="translate(743.0232121449014,65)"><path id="SvgjsPath2146" d="M0 0L380 0L380 891L0 891Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill="none"></path><path id="SvgjsPath2147" d="M0 0L380 0L380 30L0 30Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2148"><text id="SvgjsText2149" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="360px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan2150" dy="16" x="190"><tspan id="SvgjsTspan2151" style="text-decoration:;">ReactiveEffect</tspan></tspan></text></g></g><g id="SvgjsG2152" transform="translate(107.85445465205657,319)"><path id="SvgjsPath2153" d="M0 0L266.75 0L266.75 238L0 238Z " stroke-dasharray="10,6" stroke="rgba(0,0,0,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2154"><text id="SvgjsText2155" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="247px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="108.375" transform="rotate(0)"></text></g></g><g id="SvgjsG2156" transform="translate(770.5,169)"><path id="SvgjsPath2157" d="M0 0L148 0L148 47L0 47Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2158"><text id="SvgjsText2159" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="128px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="12.875" transform="rotate(0)"><tspan id="SvgjsTspan2160" dy="16" x="74"><tspan id="SvgjsTspan2161" style="text-decoration:;">new ReactiveEffect()</tspan></tspan></text></g></g><g id="SvgjsG2162" transform="translate(937.5,116)"><path id="SvgjsPath2163" d="M0 0L158.5 0L174.5 16L174.5 151L0 151L0 0Z " stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2164" d="M158.5 0L158.5 16L174.5 16Z " stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2165" d="M0 0L158.5 0L174.5 16L174.5 151L0 151L0 0Z " stroke="none" fill="none"></path><g id="SvgjsG2166"><text id="SvgjsText2167" font-family="微软雅黑" text-anchor="start" font-size="13px" width="155px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="16.875" transform="rotate(0)"><tspan id="SvgjsTspan2168" dy="16" x="10"><tspan id="SvgjsTspan2169" style="text-decoration:;">1. 传入执行函数fn</tspan></tspan><tspan id="SvgjsTspan2170" dy="16" x="10"><tspan id="SvgjsTspan2171" style="text-decoration:;">2. 传入scheduler</tspan></tspan><tspan id="SvgjsTspan2172" dy="16" x="10"><tspan id="SvgjsTspan2173" style="text-decoration:;">3. 初始化deps数组: 存储</tspan></tspan><tspan id="SvgjsTspan2174" dy="16" x="10"><tspan id="SvgjsTspan2175" style="text-decoration:;">effect的数组</tspan></tspan><tspan id="SvgjsTspan2176" dy="16" x="10"><tspan id="SvgjsTspan2177" style="text-decoration:;">4. 初始化this.parent，存</tspan></tspan><tspan id="SvgjsTspan2178" dy="16" x="10"><tspan id="SvgjsTspan2179" style="text-decoration:;">储递归调用上一个层级的</tspan></tspan><tspan id="SvgjsTspan2180" dy="16" x="10"><tspan id="SvgjsTspan2181" style="text-decoration:;">effect</tspan></tspan></text></g></g><g id="SvgjsG2182" transform="translate(103.76160607245038,722)"><path id="SvgjsPath2183" d="M0 0L269.5875149856897 0L269.5875149856897 120L0 120Z " stroke-dasharray="10,6,3,6" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2184"><text id="SvgjsText2185" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="250px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="49.375" transform="rotate(0)"></text></g></g><g id="SvgjsG2186"><path id="SvgjsPath2187" d="M937.5 191.5L928 191.5L928 192.5L922.1 192.5 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2188)"></path></g><g id="SvgjsG2190" transform="translate(122.02321214490144,124)"><path id="SvgjsPath2191" d="M0 0L241.25 0L241.25 59L0 59Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2192"><text id="SvgjsText2193" font-family="微软雅黑" text-anchor="start" font-size="13px" width="222px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="2.875" transform="rotate(0)"><tspan id="SvgjsTspan2194" dy="16" x="10"><tspan id="SvgjsTspan2195" style="text-decoration:;">new Proxy(target, { </tspan></tspan><tspan id="SvgjsTspan2196" dy="16" x="10"><tspan id="SvgjsTspan2197" style="text-decoration:;">    set() {.....}</tspan></tspan><tspan id="SvgjsTspan2198" dy="16" x="10"><tspan id="SvgjsTspan2199" style="text-decoration:;">})</tspan></tspan></text></g></g><g id="SvgjsG2200" transform="translate(798.8196364347044,277.49999999999994)"><path id="SvgjsPath2201" d="M0 0L277.4535757101967 0L277.4535757101967 132L0 132Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2202"><text id="SvgjsText2203" font-family="微软雅黑" text-anchor="start" font-size="13px" width="258px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="31.375" transform="rotate(0)"><tspan id="SvgjsTspan2204" dy="16" x="10"><tspan id="SvgjsTspan2205" style="text-decoration:;">执行每一个effect，判断effect.scheduler是</tspan></tspan><tspan id="SvgjsTspan2206" dy="16" x="10"><tspan id="SvgjsTspan2207" style="text-decoration:;">否为空，</tspan></tspan><tspan id="SvgjsTspan2208" dy="16" x="10"><tspan id="SvgjsTspan2209" style="text-decoration:;">1. scheduler不为空直接调用</tspan></tspan><tspan id="SvgjsTspan2210" dy="16" x="10"><tspan id="SvgjsTspan2211" style="text-decoration:;">effect.scheduler()</tspan></tspan></text></g></g><g id="SvgjsG2212"><path id="SvgjsPath2213" d="M241.22945465205657 315.4L241.22945465205657 288.5L242.64821214490144 288.5L242.64821214490144 259 " stroke="#323232" stroke-width="2" fill="none" marker-start="url(#SvgjsMarker2214)"></path><rect id="SvgjsRect2216" width="52" height="16" x="216.64821214490144" y="279.9093787464225" fill="#ffffff"></rect><text id="SvgjsText2217" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="52px" fill="#ff0000" font-weight="400" align="top" lineHeight="16px" font-style="" opacity="1" y="277.2843787464225" transform="rotate(0)"><tspan id="SvgjsTspan2218" dy="16" x="242.64821214490144"><tspan id="SvgjsTspan2219" style="text-decoration:;">主要代码</tspan></tspan></text></g><g id="SvgjsG2220" transform="translate(122.02321214490144,207)"><path id="SvgjsPath2221" d="M0 0L241.25 0L241.25 51L0 51Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2222"><text id="SvgjsText2223" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="222px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="14.875" transform="rotate(0)"><tspan id="SvgjsTspan2224" dy="16" x="121"><tspan id="SvgjsTspan2225" style="text-decoration:;">createSetter()</tspan></tspan></text></g></g><g id="SvgjsG2226" transform="translate(115.60445465205657,334)"><path id="SvgjsPath2227" d="M0 0L251.25 0L251.25 46L0 46Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2228"><text id="SvgjsText2229" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="232px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan2230" dy="16" x="126"><tspan id="SvgjsTspan2231" style="text-decoration:;">const result = Reflect.set(target, key, </tspan></tspan><tspan id="SvgjsTspan2232" dy="16" x="126"><tspan id="SvgjsTspan2233" style="text-decoration:;">value, receiver)</tspan></tspan></text></g></g><g id="SvgjsG2234" transform="translate(115.60445465205657,402.5)"><path id="SvgjsPath2235" d="M0 0L251.25 0L251.25 67L0 67Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffcdd2"></path><g id="SvgjsG2236"><text id="SvgjsText2237" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="232px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan2238" dy="16" x="126"><tspan id="SvgjsTspan2239" style="text-decoration:;">根据key判断需要采取什么类型type</tspan></tspan><tspan id="SvgjsTspan2240" dy="16" x="126"><tspan id="SvgjsTspan2241" style="text-decoration:;">trigger(target, type, key, value)</tspan></tspan><tspan id="SvgjsTspan2242" dy="16" x="126"><tspan id="SvgjsTspan2243" style="text-decoration:;">通知对应的effect进行重新执行</tspan></tspan></text></g></g><g id="SvgjsG2244"><path id="SvgjsPath2245" d="M241.22945465205657 381L241.22945465205657 391.25L241.22945465205657 391.25L241.22945465205657 398.9 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2246)"></path></g><g id="SvgjsG2248" transform="translate(115.60445465205657,492)"><path id="SvgjsPath2249" d="M0 0L251.25 0L251.25 45L0 45Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2250"><text id="SvgjsText2251" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="232px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="11.875" transform="rotate(0)"><tspan id="SvgjsTspan2252" dy="16" x="126"><tspan id="SvgjsTspan2253" style="text-decoration:;">return result</tspan></tspan></text></g></g><g id="SvgjsG2254"><path id="SvgjsPath2255" d="M241.22945465205657 470.5L241.22945465205657 480.75L241.22945465205657 480.75L241.22945465205657 488.4 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2256)"></path></g><g id="SvgjsG2258" transform="translate(116.69910607245038,740)"><path id="SvgjsPath2259" d="M0 0L224.875 0L240.875 16L240.875 84L0 84L0 0Z " stroke="none" fill-opacity="1" fill="#fff9c4"></path><path id="SvgjsPath2260" d="M224.875 0L224.875 16L240.875 16Z " stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2261" d="M0 0L224.875 0L240.875 16L240.875 84L0 84L0 0Z " stroke="none" fill="none"></path><g id="SvgjsG2262"><text id="SvgjsText2263" font-family="微软雅黑" text-anchor="start" font-size="13px" width="221px" fill="#323232" font-weight="400" align="bottom" lineHeight="125%" font-style="" opacity="1" y="23.375" transform="rotate(0)"><tspan id="SvgjsTspan2264" dy="16" x="10"><tspan id="SvgjsTspan2265" style="text-decoration:;">根据TriggerOpTypes类型，比如</tspan></tspan><tspan id="SvgjsTspan2266" dy="16" x="10"><tspan id="SvgjsTspan2267" style="text-decoration:;">CLEAR、SET、ADD、DELETE、</tspan></tspan><tspan id="SvgjsTspan2268" dy="16" x="10"><tspan id="SvgjsTspan2269" style="text-decoration:;">Map.SET等等去获取对应的effect集合</tspan></tspan></text></g></g><g id="SvgjsG2270" transform="translate(288.5116060724504,714.8721978610449)"><path id="SvgjsPath2271" d="M0 0L120 0L120 40L0 40Z " stroke="none" fill="none"></path><g id="SvgjsG2272"><text id="SvgjsText2273" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#ff0000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan2274" dy="16" x="60"><tspan id="SvgjsTspan2275" style="text-decoration:;">trigger()</tspan></tspan></text></g></g><g id="SvgjsG2276" transform="translate(910.0772232618783,276.75411113205286)"><path id="SvgjsPath2277" d="M0 0L175.42277673812168 0L175.42277673812168 24.745888867947144L0 24.745888867947144Z " stroke="none" fill="none"></path><g id="SvgjsG2278"><text id="SvgjsText2279" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="176px" fill="#ff0000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="1.7479444339735721" transform="rotate(0)"><tspan id="SvgjsTspan2280" dy="16" x="88"><tspan id="SvgjsTspan2281" style="text-decoration:;">function triggerEffects()</tspan></tspan></text></g></g><g id="SvgjsG2282"><path id="SvgjsPath2283" d="M114.60445465205657 436L73.76160607245038 436L73.76160607245038 782L100.16160607245038 782 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2284)"></path><rect id="SvgjsRect2286" width="48" height="15" x="49.76160607245038" y="594.278575710197" fill="#ffffff"></rect><text id="SvgjsText2287" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="48px" fill="#ff0000" font-weight="400" align="top" lineHeight="15px" font-style="" opacity="1" y="591.778575710197" transform="rotate(0)"><tspan id="SvgjsTspan2288" dy="15" x="73.76160607245038"><tspan id="SvgjsTspan2289" style="text-decoration:;">主要代码</tspan></tspan></text></g><g id="SvgjsG2290" transform="translate(817.5464242898028,431.8069259329068)"><path id="SvgjsPath2291" d="M0 0L240 0L240 55L0 55Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffcdd2"></path><g id="SvgjsG2292"><text id="SvgjsText2293" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="220px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan2294" dy="16" x="120"><tspan id="SvgjsTspan2295" style="text-decoration:;">this.scheduler()</tspan></tspan><tspan id="SvgjsTspan2296" dy="16" x="120"><tspan id="SvgjsTspan2297" style="text-decoration:;">注：new Reactive()传入的scheduler</tspan></tspan></text></g></g><g id="SvgjsG2298" transform="translate(1161.4767878550983,168)"><path id="SvgjsPath2299" d="M0 0L303.04642428980287 0L303.04642428980287 228L0 228Z " stroke-dasharray="10,6" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2300"><text id="SvgjsText2301" font-family="微软雅黑" text-anchor="end" font-size="14px" width="284px" fill="#ff0000" font-weight="400" align="top" lineHeight="200%" font-style="" opacity="1" y="-8" transform="rotate(0)"><tspan id="SvgjsTspan2302" dy="28" x="294"><tspan id="SvgjsTspan2303" style="text-decoration:;">个别场景</tspan></tspan></text></g></g><g id="SvgjsG2304" transform="translate(1143.0232121449014,534)"><path id="SvgjsPath2305" d="M0 0L339.95357571019713 0L339.95357571019713 414L0 414Z " stroke-dasharray="3,4" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2306"><text id="SvgjsText2307" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="320px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="196.375" transform="rotate(0)"></text></g></g><g id="SvgjsG2308" transform="translate(859.7645193726279,848.5652973752553)"><path id="SvgjsPath2309" d="M0 0L154.796707760904 0L154.796707760904 35.940008449514146L0 35.940008449514146Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffcdd2"></path><g id="SvgjsG2310"><text id="SvgjsText2311" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="135px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="7.345004224757073" transform="rotate(0)"><tspan id="SvgjsTspan2312" dy="16" x="77.5"><tspan id="SvgjsTspan2313" style="text-decoration:;">ReactiveEffect.run()</tspan></tspan></text></g></g><g id="SvgjsG2314" transform="translate(1155.4883939275492,552.5)"><path id="SvgjsPath2315" d="M0 0L315.02321214490144 0L315.02321214490144 95.5L0 95.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2316"><text id="SvgjsText2317" font-family="微软雅黑" text-anchor="start" font-size="13px" width="296px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="5.125" transform="rotate(0)"><tspan id="SvgjsTspan2318" dy="16" x="10"><tspan id="SvgjsTspan2319" style="text-decoration:;">1. 保留上一次的activeEffect和shouldTrack</tspan></tspan><tspan id="SvgjsTspan2320" dy="16" x="10"><tspan id="SvgjsTspan2321" style="text-decoration:;font-size: inherit;">2. 判断嵌套effect是否已经执行该effect</tspan></tspan><tspan id="SvgjsTspan2322" dy="16" x="10"><tspan id="SvgjsTspan2323" style="text-decoration:;">3. 切换activeEffect和shouldTrack为目前的effect </tspan></tspan><tspan id="SvgjsTspan2324" dy="16" x="10"><tspan id="SvgjsTspan2325" style="text-decoration:;">4. initDepMarkers()将目前effect持有的deps进行</tspan></tspan><tspan id="SvgjsTspan2326" dy="16" x="10"><tspan id="SvgjsTspan2327" style="text-decoration:;">deps[i].w |= trackOpBit打上标记位</tspan></tspan></text></g></g><g id="SvgjsG2328" transform="translate(1155.4883939275492,667)"><path id="SvgjsPath2329" d="M0 0L315.02321214490144 0L315.02321214490144 61L0 61Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2330"><text id="SvgjsText2331" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="296px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="11.875" transform="rotate(0)"><tspan id="SvgjsTspan2332" dy="16" x="158"><tspan id="SvgjsTspan2333" style="text-decoration:;">5. 执行this.fn()，然后将目前effect持有的deps进行</tspan></tspan><tspan id="SvgjsTspan2334" dy="16" x="158"><tspan id="SvgjsTspan2335" style="text-decoration:;">deps[i].n |= trackOpBit</tspan></tspan></text></g></g><g id="SvgjsG2336" transform="translate(1155.4883939275492,757)"><path id="SvgjsPath2337" d="M0 0L315.02321214490144 0L315.02321214490144 102L0 102Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2338"><text id="SvgjsText2339" font-family="微软雅黑" text-anchor="start" font-size="13px" width="296px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="8.375" transform="rotate(0)"><tspan id="SvgjsTspan2340" dy="16" x="10"><tspan id="SvgjsTspan2341" style="text-decoration:;">6. finalizeDepMarkers()根据上面的deps.w和</tspan></tspan><tspan id="SvgjsTspan2342" dy="16" x="10"><tspan id="SvgjsTspan2343" style="text-decoration:;">deps.n确定对于effect来说，哪些deps是已经过期</tspan></tspan><tspan id="SvgjsTspan2344" dy="16" x="10"><tspan id="SvgjsTspan2345" style="text-decoration:;">的，哪些是新增的，哪些是需要保持不变的，然后</tspan></tspan><tspan id="SvgjsTspan2346" dy="16" x="10"><tspan id="SvgjsTspan2347" style="text-decoration:;">进行effect.deps的最新构建；最后重置目前递归深</tspan></tspan><tspan id="SvgjsTspan2348" dy="16" x="10"><tspan id="SvgjsTspan2349" style="text-decoration:;">度下dep.w和dep.n的值</tspan></tspan></text></g></g><g id="SvgjsG2350"><path id="SvgjsPath2351" d="M1313 733L1313 744.5L1313 744.5L1313 753.4 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2352)"></path></g><g id="SvgjsG2354"><path id="SvgjsPath2355" d="M1313 649L1313 659.5L1313 659.5L1313 667.4 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2356)"></path></g><g id="SvgjsG2358" transform="translate(1155.4883939275492,877)"><path id="SvgjsPath2359" d="M0 0L315.02321214490144 0L315.02321214490144 52L0 52Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2360"><text id="SvgjsText2361" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="296px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="7.375" transform="rotate(0)"><tspan id="SvgjsTspan2362" dy="16" x="158"><tspan id="SvgjsTspan2363" style="text-decoration:;">7. 执行完毕fn，切换回上一次的activeEffect和</tspan></tspan><tspan id="SvgjsTspan2364" dy="16" x="158"><tspan id="SvgjsTspan2365" style="text-decoration:;">shouldTrack状态</tspan></tspan></text></g></g><g id="SvgjsG2366"><path id="SvgjsPath2367" d="M1313 860L1313 868L1313 868L1313 873.4 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2368)"></path></g><g id="SvgjsG2370"><path id="SvgjsPath2371" d="M121.02321214490144 153.5L92.02321214490144 153.5L92.02321214490144 232.5L118.42321214490144 232.5 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2372)"></path><rect id="SvgjsRect2374" width="52" height="16" x="66.02321214490144" y="183.7" fill="#ffffff"></rect><text id="SvgjsText2375" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="52px" fill="#323232" font-weight="400" align="top" lineHeight="16px" font-style="" opacity="1" y="181.075" transform="rotate(0)"><tspan id="SvgjsTspan2376" dy="16" x="92.02321214490144"><tspan id="SvgjsTspan2377" style="text-decoration:;">实际调用</tspan></tspan></text></g><g id="SvgjsG2378" transform="translate(851.9620455433801,507.77777777777806)"><path id="SvgjsPath2379" d="M0 0L155.16875749284532 0L171.16875749284532 16L171.16875749284532 83L0 83L0 0Z " stroke="none" fill-opacity="1" fill="#ffffaa"></path><path id="SvgjsPath2380" d="M155.16875749284532 0L155.16875749284532 16L171.16875749284532 16Z " stroke="none" fill-opacity="1" fill="#cdcdcd"></path><path id="SvgjsPath2381" d="M0 0L155.16875749284532 0L171.16875749284532 16L171.16875749284532 83L0 83L0 0Z " stroke="none" fill="none"></path><g id="SvgjsG2382"><text id="SvgjsText2383" font-family="微软雅黑" text-anchor="start" font-size="13px" width="152px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="6.875" transform="rotate(0)"><tspan id="SvgjsTspan2384" dy="16" x="10"><tspan id="SvgjsTspan2385" style="text-decoration:;">if (!this._dirty) {</tspan></tspan><tspan id="SvgjsTspan2386" dy="16" x="10"><tspan id="SvgjsTspan2387" style="text-decoration:;">    this._dirty = true;</tspan></tspan><tspan id="SvgjsTspan2388" dy="16" x="10"><tspan id="SvgjsTspan2389" style="text-decoration:;">    triggerRefValue(this);</tspan></tspan><tspan id="SvgjsTspan2390" dy="16" x="10"><tspan id="SvgjsTspan2391" style="text-decoration:;">}</tspan></tspan></text></g></g><g id="SvgjsG2392"><path id="SvgjsPath2393" d="M937.5464242898028 487.8069259329068L937.5464242898028 497.2923518553424L937.5464242898029 497.2923518553424L937.5464242898029 505.17777777777803 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2394)"></path></g><g id="SvgjsG2396" transform="translate(1197.6191969637746,211)"><path id="SvgjsPath2397" d="M0 0L230.76160607245072 0L230.76160607245072 71L0 71Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2398"><text id="SvgjsText2399" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="211px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="8.875" transform="rotate(0)"><tspan id="SvgjsTspan2400" dy="16" x="115.5"><tspan id="SvgjsTspan2401" style="text-decoration:;">ReactiveEffect.run()执行完成后的</tspan></tspan><tspan id="SvgjsTspan2402" dy="16" x="115.5"><tspan id="SvgjsTspan2403" style="text-decoration:;">值，比如watch()中返回监听的响应</tspan></tspan><tspan id="SvgjsTspan2404" dy="16" x="115.5"><tspan id="SvgjsTspan2405" style="text-decoration:;">式变量的值</tspan></tspan></text></g></g><g id="SvgjsG2406" transform="translate(1195.3095984818872,312)"><path id="SvgjsPath2407" d="M0 0L235.3808030362253 0L235.3808030362253 73L0 73Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2408"><text id="SvgjsText2409" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="216px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="17.875" transform="rotate(0)"><tspan id="SvgjsTspan2410" dy="16" x="118"><tspan id="SvgjsTspan2411" style="text-decoration:;">Reactive.run()执行返回的值，触发</tspan></tspan><tspan id="SvgjsTspan2412" dy="16" x="118"><tspan id="SvgjsTspan2413" style="text-decoration:;">scheduler中注册的回调函数</tspan></tspan></text></g></g><g id="SvgjsG2414"><path id="SvgjsPath2415" d="M1312.9999999999998 283L1312.9999999999998 297L1312.9999999999998 297L1312.9999999999998 308.4 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2416)"></path></g><g id="SvgjsG2418"><path id="SvgjsPath2419" d="M1313 533L1313 465L1312.9999999999998 465L1312.9999999999998 399.6 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2420)"></path><rect id="SvgjsRect2422" width="112" height="16" x="1257" y="458.2999999999999" fill="#ffffff"></rect><text id="SvgjsText2423" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="112px" fill="#323232" font-weight="400" align="top" lineHeight="16px" font-style="" opacity="1" y="455.6749999999999" transform="rotate(0)"><tspan id="SvgjsTspan2424" dy="16" x="1313"><tspan id="SvgjsTspan2425" style="text-decoration:;">返回fn()执行后的值</tspan></tspan></text></g><g id="SvgjsG2426"><path id="SvgjsPath2427" d="M357.5741060724504 782L772.8635379202428 782L772.8635379202428 343.49999999999994L795.2196364347044 343.49999999999994 " stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2428)"></path></g><g id="SvgjsG2430"><path id="SvgjsPath2431" d="M937.5464242898028 410.5L937.5464242898028 420.6534629664534L937.5464242898028 420.6534629664534L937.5464242898028 428.20692593290676 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2432)"></path></g><g id="SvgjsG2434" transform="translate(456.8866060724507,114.5)"><path id="SvgjsPath2435" d="M0 0L247 0L247 76L0 76Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2436"><text id="SvgjsText2437" font-family="微软雅黑" text-anchor="start" font-size="13px" width="227px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="3.375" transform="rotate(0)"><tspan id="SvgjsTspan2438" dy="16" x="10"><tspan id="SvgjsTspan2439" style="text-decoration:;fill: rgb(255, 0, 0);text-decoration: underline;">const computedData = function </tspan></tspan><tspan id="SvgjsTspan2440" dy="16" x="10"><tspan id="SvgjsTspan2441" style="text-decoration:;fill: rgb(255, 0, 0);text-decoration: underline;">computed(getterOrOptions):</tspan></tspan><tspan id="SvgjsTspan2442" dy="16" x="10"><tspan id="SvgjsTspan2443" style="text-decoration:;caret-color: rgb(255, 0, 0);fill: rgb(0, 0, 0);">整理传入的参数，构建出标准的get和</tspan></tspan><tspan id="SvgjsTspan2444" dy="16" x="10"><tspan id="SvgjsTspan2445" style="text-decoration:;caret-color: rgb(255, 0, 0);fill: rgb(0, 0, 0);">set请求</tspan></tspan></text></g></g><g id="SvgjsG2446" transform="translate(451.8866060724507,218.5)"><path id="SvgjsPath2447" d="M0 0L258.5 0L258.5 209L0 209Z " stroke-dasharray="10,6" stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2448"><text id="SvgjsText2449" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="239px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="93.875" transform="rotate(0)"></text></g></g><g id="SvgjsG2450" transform="translate(461.8866060724507,264.75)"><path id="SvgjsPath2451" d="M0 0L238.5 0L238.5 75.5L0 75.5Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2452"><text id="SvgjsText2453" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="219px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="11.125" transform="rotate(0)"><tspan id="SvgjsTspan2454" dy="16" x="119.5"><tspan id="SvgjsTspan2455" style="text-decoration:;">const cRef = new </tspan></tspan><tspan id="SvgjsTspan2456" dy="16" x="119.5"><tspan id="SvgjsTspan2457" style="text-decoration:;">ComputedRefImpl(getter, setter, </tspan></tspan><tspan id="SvgjsTspan2458" dy="16" x="119.5"><tspan id="SvgjsTspan2459" style="text-decoration:;">onlyGetter || !setter, isSSR)</tspan></tspan></text></g></g><g id="SvgjsG2460" transform="translate(499.7616060724507,367.5)"><path id="SvgjsPath2461" d="M0 0L162.75 0L162.75 42L0 42Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2462"><text id="SvgjsText2463" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="143px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="10.375" transform="rotate(0)"><tspan id="SvgjsTspan2464" dy="16" x="81.5"><tspan id="SvgjsTspan2465" style="text-decoration:;">return cRef</tspan></tspan></text></g></g><g id="SvgjsG2466" transform="translate(603.8866060724507,216)"><path id="SvgjsPath2467" d="M0 0L120 0L120 40L0 40Z " stroke="none" fill="none"></path><g id="SvgjsG2468"><text id="SvgjsText2469" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="120px" fill="#ff0000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="9.375" transform="rotate(0)"><tspan id="SvgjsTspan2470" dy="16" x="60"><tspan id="SvgjsTspan2471" style="text-decoration:;">computed()</tspan></tspan></text></g></g><g id="SvgjsG2472"><path id="SvgjsPath2473" d="M580.3866060724507 191.5L580.3866060724507 204.5L581.1366060724507 204.5L581.1366060724507 214.89999999999998 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2474)"></path></g><g id="SvgjsG2476" transform="translate(408.5116060724504,479.5)"><path id="SvgjsPath2477" d="M0 0L323.5580303622537 0L323.5580303622537 214L0 214Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2478"><text id="SvgjsText2479" font-family="微软雅黑" text-anchor="start" font-size="13px" width="304px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="16.375" transform="rotate(0)"><tspan id="SvgjsTspan2480" dy="16" x="10"><tspan id="SvgjsTspan2481" style="text-decoration:;">constructor(getter, _setter, isReadonly, isSSR) {</tspan></tspan><tspan id="SvgjsTspan2482" dy="16" x="10"><tspan id="SvgjsTspan2483" style="text-decoration:;">    // ...省略代码</tspan></tspan><tspan id="SvgjsTspan2484" dy="16" x="10"><tspan id="SvgjsTspan2485" style="text-decoration:;">    this._dirty = true;</tspan></tspan><tspan id="SvgjsTspan2486" dy="16" x="10"><tspan id="SvgjsTspan2487" style="text-decoration:;">    this.effect = new ReactiveEffect(getter, () =&gt; {</tspan></tspan><tspan id="SvgjsTspan2488" dy="16" x="10"><tspan id="SvgjsTspan2489" style="text-decoration:;">        if (!this._dirty) {</tspan></tspan><tspan id="SvgjsTspan2490" dy="16" x="10"><tspan id="SvgjsTspan2491" style="text-decoration:;">            this._dirty = true;</tspan></tspan><tspan id="SvgjsTspan2492" dy="16" x="10"><tspan id="SvgjsTspan2493" style="text-decoration:;">            triggerRefValue(this);</tspan></tspan><tspan id="SvgjsTspan2494" dy="16" x="10"><tspan id="SvgjsTspan2495" style="text-decoration:;">        }</tspan></tspan><tspan id="SvgjsTspan2496" dy="16" x="10"><tspan id="SvgjsTspan2497" style="text-decoration:;">    });</tspan></tspan><tspan id="SvgjsTspan2498" dy="16" x="10"><tspan id="SvgjsTspan2499" style="text-decoration:;">    this.dep = undefined;</tspan></tspan><tspan id="SvgjsTspan2500" dy="16" x="10"><tspan id="SvgjsTspan2501" style="text-decoration:;">}</tspan></tspan></text></g></g><g id="SvgjsG2502"><path id="SvgjsPath2503" d="M581.1366060724507 341.25L581.1366060724507 353.875L581.1366060724507 353.875L581.1366060724507 363.9 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2504)"></path></g><g id="SvgjsG2506"><path id="SvgjsPath2507" d="M460.8866060724507 302.5L431.8866060724507 302.5L431.8866060724507 449.5L570.2906212535772 449.5L570.2906212535772 475.9 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2508)"></path></g><g id="SvgjsG2510"><path id="SvgjsPath2511" d="M733.0696364347041 586.5L751.284818217352 586.5L751.284818217352 192.5L766.9 192.5 " stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2512)"></path></g><g id="SvgjsG2514" transform="translate(25,894.2777777777778)"><path id="SvgjsPath2515" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2516"><text id="SvgjsText2517" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#000000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2518" dy="16" x="90.5"><tspan id="SvgjsTspan2519" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2520" transform="translate(624,706)"><path id="SvgjsPath2521" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2522"><text id="SvgjsText2523" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2524" dy="16" x="90.5"><tspan id="SvgjsTspan2525" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2526" transform="translate(511.30069846374363,842)"><path id="SvgjsPath2527" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2528"><text id="SvgjsText2529" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2530" dy="16" x="90.5"><tspan id="SvgjsTspan2531" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2532" transform="translate(916.8297136448707,894.2777777777779)"><path id="SvgjsPath2533" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2534"><text id="SvgjsText2535" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2536" dy="16" x="90.5"><tspan id="SvgjsTspan2537" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2538" transform="translate(1091.5464242898029,409.49999999999994)"><path id="SvgjsPath2539" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2540"><text id="SvgjsText2541" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2542" dy="16" x="90.5"><tspan id="SvgjsTspan2543" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2544" transform="translate(297.7058515795443,64.46469839998753)"><path id="SvgjsPath2545" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2546"><text id="SvgjsText2547" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2548" dy="16" x="90.5"><tspan id="SvgjsTspan2549" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2550" transform="translate(32.70585157954429,251.9823491999938)"><path id="SvgjsPath2551" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2552"><text id="SvgjsText2553" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.45" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2554" dy="16" x="90.5"><tspan id="SvgjsTspan2555" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2556" transform="matrix(0.9063077870366497,-0.4226182617407,0.4226182617407,0.9063077870366497,423.2169251585771,536.0219644471623)"><path id="SvgjsPath2557" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2558"><text id="SvgjsText2559" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.2" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2560" dy="16" x="90.5"><tspan id="SvgjsTspan2561" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2562" transform="matrix(0.9063077870366497,-0.4226182617407,0.4226182617407,0.9063077870366497,474.2169251585771,369.0219644471623)"><path id="SvgjsPath2563" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2564"><text id="SvgjsText2565" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.2" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2566" dy="16" x="90.5"><tspan id="SvgjsTspan2567" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2568" transform="matrix(0.9063077870366497,-0.4226182617407,0.4226182617407,0.9063077870366497,712.2169251585772,145.02195681776777)"><path id="SvgjsPath2569" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2570"><text id="SvgjsText2571" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.2" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2572" dy="16" x="90.5"><tspan id="SvgjsTspan2573" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2574" transform="matrix(0.9063077870366497,-0.4226182617407,0.4226182617407,0.9063077870366497,540.2169251585772,164.02195681776777)"><path id="SvgjsPath2575" d="M0 0L180.2941484204557 0L180.2941484204557 81.53530160001247L0 81.53530160001247Z " stroke="none" fill="none"></path><g id="SvgjsG2576"><text id="SvgjsText2577" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="181px" fill="#e0e0e0" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="0.2" y="30.142650800006237" transform="rotate(0)"><tspan id="SvgjsTspan2578" dy="16" x="90.5"><tspan id="SvgjsTspan2579" style="text-decoration:;">https://github.com/wbccb</tspan></tspan></text></g></g><g id="SvgjsG2580" transform="translate(825.5464242898028,624.4444444444447)"><path id="SvgjsPath2581" d="M0 0L224.00000000000023 0L224.00000000000023 54.8888888888888L0 54.8888888888888Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2582"><text id="SvgjsText2583" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="205px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="16.8194444444444" transform="rotate(0)"><tspan id="SvgjsTspan2584" dy="16" x="112.5"><tspan id="SvgjsTspan2585" style="text-decoration:;">triggerEffects(ref.dep)</tspan></tspan></text></g></g><g id="SvgjsG2586" transform="translate(943.8333333333335,611.7486296226496)"><path id="SvgjsPath2587" d="M0 0L120 0L120 40L0 40Z " stroke="none" fill="none"></path><g id="SvgjsG2588"><text id="SvgjsText2589" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="120px" fill="#ff0000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="10" transform="rotate(0)"><tspan id="SvgjsTspan2590" dy="15" x="60"><tspan id="SvgjsTspan2591" style="text-decoration:;">triggerRefValue</tspan></tspan></text></g></g><g id="SvgjsG2592" transform="translate(825.16287325308,729.5353016000126)"><path id="SvgjsPath2593" d="M0 0L224 0L224 57.99999999999977L0 57.99999999999977Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2594"><text id="SvgjsText2595" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="204px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="18.374999999999886" transform="rotate(0)"><tspan id="SvgjsTspan2596" dy="16" x="112"><tspan id="SvgjsTspan2597" style="text-decoration:;">effect.run()</tspan></tspan></text></g></g><g id="SvgjsG2598"><path id="SvgjsPath2599" d="M937.16287325308 788.5353016000124L937.16287325308 818.0502994876339L937.1628732530799 818.0502994876339L937.1628732530799 844.9652973752553 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2600)"></path></g><g id="SvgjsG2602" transform="translate(946.1202423768639,726.8838254000032)"><path id="SvgjsPath2603" d="M0 0L113.7130909564695 0L113.7130909564695 28.232349199993678L0 28.232349199993678Z " stroke="none" fill="none"></path><g id="SvgjsG2604"><text id="SvgjsText2605" font-family="微软雅黑" text-anchor="middle" font-size="12px" width="114px" fill="#ff0000" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.116174599996839" transform="rotate(0)"><tspan id="SvgjsTspan2606" dy="15" x="57"><tspan id="SvgjsTspan2607" style="text-decoration:;">triggerEffects</tspan></tspan></text></g></g><g id="SvgjsG2608"><path id="SvgjsPath2609" d="M937.5464242898028 590.777777777778L937.5464242898028 607.6111111111113L937.5464242898029 607.6111111111113L937.5464242898029 620.8444444444447 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2610)"></path></g><g id="SvgjsG2612"><path id="SvgjsPath2613" d="M937.5464242898029 680.3333333333335L937.5464242898029 704.4343174666731L937.16287325308 704.4343174666731L937.16287325308 725.9353016000126 " stroke="#323232" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2614)"></path></g><g id="SvgjsG2616" transform="translate(846.8873444503103,677.5)"><path id="SvgjsPath2617" d="M0 0L212.94598888302312 0L212.94598888302312 44.5L0 44.5Z " stroke="none" fill="none"></path><g id="SvgjsG2618"><text id="SvgjsText2619" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="213px" fill="#ff0000" font-weight="700" align="middle" lineHeight="125%" font-style="" opacity="1" y="3.625" transform="rotate(0)"><tspan id="SvgjsTspan2620" dy="16" x="106.5"><tspan id="SvgjsTspan2621" style="text-decoration:;">注意是ref.dep中的effect，这里的</tspan></tspan><tspan id="SvgjsTspan2622" dy="16" x="106.5"><tspan id="SvgjsTspan2623" style="text-decoration:;">effect可能是渲染effect</tspan></tspan></text></g></g><g id="SvgjsG2624" transform="translate(791.8873444503101,248.32635867807198)"><path id="SvgjsPath2625" d="M0 0L212.94598888302312 0L212.94598888302312 44.5L0 44.5Z " stroke="none" fill="none"></path><g id="SvgjsG2626"><text id="SvgjsText2627" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="213px" fill="#ff0000" font-weight="700" align="middle" lineHeight="125%" font-style="" opacity="1" y="11.625" transform="rotate(0)"><tspan id="SvgjsTspan2628" dy="16" x="106.5"><tspan id="SvgjsTspan2629" style="text-decoration:;">Computed持有的ReactiveEffect</tspan></tspan></text></g></g><g id="SvgjsG2630" transform="translate(436.3749999999996,790)"><path id="SvgjsPath2631" d="M0 0L267.83124250715514 0L267.83124250715514 158L0 158Z " stroke="rgba(50,50,50,1)" stroke-width="2" fill-opacity="1" fill="#ffffff"></path><g id="SvgjsG2632"><text id="SvgjsText2633" font-family="微软雅黑" text-anchor="start" font-size="13px" width="248px" fill="#323232" font-weight="400" align="middle" lineHeight="125%" font-style="" opacity="1" y="4.375" transform="rotate(0)"><tspan id="SvgjsTspan2634" dy="16" x="10"><tspan id="SvgjsTspan2635" style="text-decoration:;">get value() {</tspan></tspan><tspan id="SvgjsTspan2636" dy="16" x="10"><tspan id="SvgjsTspan2637" style="text-decoration:;">    const self = toRaw(this);</tspan></tspan><tspan id="SvgjsTspan2638" dy="16" x="10"><tspan id="SvgjsTspan2639" style="text-decoration:;">    trackRefValue(self);</tspan></tspan><tspan id="SvgjsTspan2640" dy="16" x="10"><tspan id="SvgjsTspan2641" style="text-decoration:;">    if (self._dirty || !self._cacheable) {</tspan></tspan><tspan id="SvgjsTspan2642" dy="16" x="10"><tspan id="SvgjsTspan2643" style="text-decoration:;">        self._dirty = false;</tspan></tspan><tspan id="SvgjsTspan2644" dy="16" x="10"><tspan id="SvgjsTspan2645" style="text-decoration:;">        self._value = self.effect.run();</tspan></tspan><tspan id="SvgjsTspan2646" dy="16" x="10"><tspan id="SvgjsTspan2647" style="text-decoration:;">    }</tspan></tspan><tspan id="SvgjsTspan2648" dy="16" x="10"><tspan id="SvgjsTspan2649" style="text-decoration:;">    return self._value;</tspan></tspan><tspan id="SvgjsTspan2650" dy="16" x="10"><tspan id="SvgjsTspan2651" style="text-decoration:;">}</tspan></tspan></text></g></g><g id="SvgjsG2652"><path id="SvgjsPath2653" d="M858.7645193726279 866.5353016000124L781.9853809398915 866.5353016000124L781.9853809398915 866.6366708914237L707.8062425071549 866.6366708914237 " stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2654)"></path></g><g id="SvgjsG2656"><path id="SvgjsPath2657" d="M704.560307379214 938.6579798566743L923.530153689607 938.6579798566743L923.530153689607 938.6579798566743L1139.9 938.6579798566743 " stroke="#ff0000" stroke-width="2" fill="none" marker-end="url(#SvgjsMarker2658)"></path></g><g id="SvgjsG2660" transform="translate(757.1742534938406,907.5)"><path id="SvgjsPath2661" d="M0 0L212.94598888302312 0L212.94598888302312 44.5L0 44.5Z " stroke="none" fill="none"></path><g id="SvgjsG2662"><text id="SvgjsText2663" font-family="微软雅黑" text-anchor="middle" font-size="13px" width="213px" fill="#ff0000" font-weight="700" align="middle" lineHeight="125%" font-style="" opacity="1" y="11.625" transform="rotate(0)"><tspan id="SvgjsTspan2664" dy="16" x="106.5"><tspan id="SvgjsTspan2665" style="text-decoration:;">effect.run()，拿到最新计算出来的值</tspan></tspan></text></g></g></svg>